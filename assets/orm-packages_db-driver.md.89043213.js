import{_ as r,y as c,D as n,O as a,V as t,X as o,B as s,T as p,x as i}from"./plugin-vue_export-helper.356b96c4.js";const ss='{"title":"@fxjs/db-driver","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u652F\u6301\u7684\u6570\u636E\u5E93\u7C7B\u578B","slug":"\u652F\u6301\u7684\u6570\u636E\u5E93\u7C7B\u578B"},{"level":2,"title":"\u5FEB\u901F\u5F00\u59CB","slug":"\u5FEB\u901F\u5F00\u59CB"},{"level":2,"title":"Driver Interface","slug":"driver-interface"},{"level":3,"title":"Driver.create(connection: string | object): DriverInstance","slug":"driver-create-connection-string-object-driverinstance-static"},{"level":3,"title":"Driver.formatUrl(urlObj: object): string","slug":"driver-formaturl-urlobj-object-string-static"},{"level":3,"title":"Driver.getDriver(type: string): DriverConstructor","slug":"driver-getdriver-type-string-driverconstructor-static"},{"level":3,"title":"Driver::uid","slug":"driver-uid-readonly"},{"level":3,"title":"Driver::uri","slug":"driver-uri-readonly"},{"level":3,"title":"Driver::type","slug":"driver-type"},{"level":3,"title":"Driver::config","slug":"driver-config-readonly"},{"level":3,"title":"Driver::extend_config","slug":"driver-extend-config-readonly"},{"level":3,"title":"Driver::connection","slug":"driver-connection-readonly"},{"level":3,"title":"Driver::isPool","slug":"driver-ispool-readonly"},{"level":3,"title":"Driver::isSql","slug":"driver-issql-readonly"},{"level":3,"title":"Driver::isNoSql","slug":"driver-isnosql-readonly"},{"level":3,"title":"Driver::isCommand","slug":"driver-iscommand-readonly"},{"level":3,"title":"Driver::open(): void","slug":"driver-open-void"},{"level":3,"title":"Driver::close(): void","slug":"driver-close-void"},{"level":3,"title":"Driver::reopen(): void","slug":"driver-reopen-void"},{"level":3,"title":"Driver::getConnection(): T","slug":"driver-getconnection-t"},{"level":3,"title":"Driver::connectionPool(callback: (connection: CONN_TYPE) => any): any","slug":"driver-connectionpool-callback-connection-conn-type-any-any"},{"level":3,"title":"Driver::useTrans(callback: (conn_for_trans: CONN_TYPE) => any)","slug":"driver-usetrans-callback-conn-for-trans-conn-type-any"},{"level":2,"title":"SQLDriver extends Driver","slug":"sqldriver-extends-driver"},{"level":2,"title":"MySQLDriver extends SQLDriver","slug":"mysqldriver-extends-sqldriver"},{"level":2,"title":"PostgreSQLDriver extends SQLDriver","slug":"postgresqldriver-extends-sqldriver"},{"level":2,"title":"SQLiteDriver extends SQLDriver","slug":"sqlitedriver-extends-sqldriver"},{"level":2,"title":"RedisDriver extends Driver","slug":"redisdriver-extends-driver"},{"level":2,"title":"MongoDriver extends Driver","slug":"mongodriver-extends-driver"}],"relativePath":"orm-packages/db-driver.md","lastUpdated":1657540384396}',d={},l=o(`<h1 id="fxjs-db-driver" tabindex="-1"><code>@fxjs/db-driver</code> <a class="header-anchor" href="#fxjs-db-driver" aria-hidden="true">#</a></h1><p><a href="https://www.npmjs.org/package/@fxjs/db-driver" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/@fxjs/db-driver.svg" alt="NPM version"></a>\xA0 <a href="https://www.npmjs.org/package/@fxjs/db-driver" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/dt/@fxjs/db-driver.svg" alt="NPM download"></a>\xA0 <a href="https://www.npmjs.org/package/@fxjs/db-driver" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/dm/@fxjs/db-driver.svg" alt="NPM download monthly"></a></p><p>db-driver \u63D0\u4F9B\u4E86\u7EDF\u4E00\u7684\u63A5\u53E3 <code>Driver</code>, \u7528\u4E8E\u64CD\u4F5C\u6570\u636E\u5E93.</p><h2 id="\u652F\u6301\u7684\u6570\u636E\u5E93\u7C7B\u578B" tabindex="-1">\u652F\u6301\u7684\u6570\u636E\u5E93\u7C7B\u578B <a class="header-anchor" href="#\u652F\u6301\u7684\u6570\u636E\u5E93\u7C7B\u578B" aria-hidden="true">#</a></h2><p>\u76EE\u524D db-driver \u652F\u6301\u7684\u6570\u636E\u5E93\u7C7B\u578B\u6709:</p><table><thead><tr><th>\u6570\u636E\u5E93</th><th>\u9A71\u52A8\u7C7B\u578B\u6807\u8BC6</th></tr></thead><tbody><tr><td>MySQL/MariaDB</td><td><code>mysql</code></td></tr><tr><td>PostgreSQL</td><td><code>postgresql</code></td></tr><tr><td>SQLite</td><td><code>sqlite</code></td></tr><tr><td>Redis</td><td><code>redis</code></td></tr><tr><td>MongoDB</td><td><code>mongodb</code></td></tr></tbody></table><h2 id="\u5FEB\u901F\u5F00\u59CB" tabindex="-1">\u5FEB\u901F\u5F00\u59CB <a class="header-anchor" href="#\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a></h2><p>\u5B89\u88C5</p><div class="language-sh"><pre><code>npm install @fxjs/db-driver
</code></pre></div><p>\u5728 fibjs \u4E2D\u6784\u9020\u4E00\u4E2A\u9002\u7528\u4E8E <code>mysql</code> \u7684 dbdriver</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Driver <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@fxjs/db-driver&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use connection string</span>
<span class="token keyword">var</span> driver <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:password@localhost:3306/mydb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or use connection object</span>
<span class="token keyword">var</span> driver <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;mysql:&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;mydb&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// open connection</span>
driver<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// execute sql query</span>
driver<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&#39;CREATE DATABASE IF NOT EXISTS mydb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// close connection</span>
driver<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// reopen connection, equivalent to \`driver.close()\` safely and then \`driver.open()\`</span>
driver<span class="token punctuation">.</span><span class="token function">reopen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="driver-interface" tabindex="-1"><code>Driver</code> Interface <a class="header-anchor" href="#driver-interface" aria-hidden="true">#</a></h2>`,12),u={id:"driver-create-connection-string-object-driverinstance-static",tabindex:"-1"},v=n("code",null,"Driver.create(connection: string | object): DriverInstance",-1),_=s(),h=s("static"),k=s(),g=n("a",{class:"header-anchor",href:"#driver-create-connection-string-object-driverinstance-static","aria-hidden":"true"},"#",-1),y=o(`<p>\u6839\u636E\u4F20\u5165\u6570\u636E\u5E93\u8FDE\u63A5\u5B57\u7B26\u4E32, \u6216\u8005\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61, \u521B\u5EFA\u4E00\u4E2A <code>Driver</code> \u5B9E\u4F8B. Driver \u4F1A\u6839\u636E\u4F20\u9012\u7684\u524D\u7F00, \u81EA\u52A8\u9009\u62E9\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u7C7B\u578B.</p><div class="language-js"><pre><code><span class="token keyword">var</span> mydb <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> pgdb <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;psql://root:@localhost:5432&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pgdb <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;postgresql://root:@localhost:5432&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pgdb <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;pg://root:@localhost:5432&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> redisCmder <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;redis://127.0.0.1:6379&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> sqliteDB <span class="token operator">=</span>Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;sqlite:web.db&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sqliteDB <span class="token operator">=</span>Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;sqlite:/var/www/web.db&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,2),b={id:"driver-formaturl-urlobj-object-string-static",tabindex:"-1"},f=n("code",null,"Driver.formatUrl(urlObj: object): string",-1),m=s(),D=s("static"),q=s(),x=n("a",{class:"header-anchor",href:"#driver-formaturl-urlobj-object-string-static","aria-hidden":"true"},"#",-1),T=o(`<p>\u5C06\u4E00\u4E2A\u5BF9\u8C61\u683C\u5F0F\u5316\u4E3A\u6570\u636E\u5E93\u8FDE\u63A5\u5B57\u7B26\u4E32.</p><div class="language-js"><pre><code>Driver<span class="token punctuation">.</span><span class="token function">formatURL</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">protocol</span> <span class="token operator">:</span> <span class="token string">&quot;mysql:&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hostname</span> <span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">username</span> <span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span>     <span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
    <span class="token literal-property property">password</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pathname</span> <span class="token operator">:</span> <span class="token string">&quot;/mydb&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">slashes</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// use \`//\` after protocol</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; &quot;mysql://root@localhost:3306/mydb&quot;</span>

Driver<span class="token punctuation">.</span><span class="token function">formatURL</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&quot;sqlite:&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;web.db&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; &quot;sqlite:web.db&quot;</span>
</code></pre></div>`,2),w={id:"driver-getdriver-type-string-driverconstructor-static",tabindex:"-1"},S=n("code",null,"Driver.getDriver(type: string): DriverConstructor",-1),j=s(),C=s("static"),P=s(),A=n("a",{class:"header-anchor",href:"#driver-getdriver-type-string-driverconstructor-static","aria-hidden":"true"},"#",-1),E=o(`<p>\u6839\u636E\u4F20\u5165 <code>type</code> \u83B7\u53D6\u5BF9\u5E94\u7684 driver. <code>type</code> \u53EF\u4EE5\u662F\u51C6\u786E\u7684\u9A71\u52A8\u7C7B\u578B <code>&#39;mysql&#39; | &#39;sqlite&#39; | &#39;psql&#39; | &#39;mssql&#39; | &#39;redis&#39; | &#39;mongodb&#39;</code></p><div class="language-js"><pre><code><span class="token comment">// return mysql driver</span>
Driver<span class="token punctuation">.</span><span class="token function">getDriver</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>\u4E5F\u53EF\u4EE5\u662F\u5E26\u6709\u5408\u6CD5 protocol \u524D\u7F00\u7684\u5B57\u7B26\u4E32, \u6BD4\u5982\u8FDE\u63A5\u5B57\u7B26\u4E32. \u5F53\u53D1\u73B0\u4F20\u5165\u5B57\u7B26\u4E32\u4E0D\u662F\u51C6\u786E\u7684\u9A71\u52A8\u7C7B\u578B\u65F6, \u4F1A\u5C1D\u8BD5\u5C06\u5176\u6309 url \u89E3\u6790, \u83B7\u5F97\u5176 protocol \u5E76\u4EE5\u6B64\u53D6\u5F97\u5BF9\u5E94\u7684\u9A71\u52A8\u7C7B\u578B.</p><div class="language-js"><pre><code><span class="token comment">// return mysql driver</span>
Driver<span class="token punctuation">.</span><span class="token function">getDriver</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://localhost:3306/mydb&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// return sqlite driver</span>
Driver<span class="token punctuation">.</span><span class="token function">getDriver</span><span class="token punctuation">(</span><span class="token string">&#39;sqlite:web.db&#39;</span><span class="token punctuation">)</span>
</code></pre></div>`,4),I={id:"driver-uid-readonly",tabindex:"-1"},N=n("code",null,"Driver::uid",-1),L=s(),Q=s("readonly"),V=s(),B=n("a",{class:"header-anchor",href:"#driver-uid-readonly","aria-hidden":"true"},"#",-1),R=n("p",null,"Driver \u5B9E\u4F8B\u521B\u5EFA\u65F6, \u751F\u6210\u7684\u552F\u4E00 id. \u4E0D\u53EF\u66F4\u6539, \u4E00\u822C\u7528\u4E8E\u5F00\u53D1\u8005\u5185\u90E8 debug",-1),M={id:"driver-uri-readonly",tabindex:"-1"},Y=n("code",null,"Driver::uri",-1),O=s(),W=s("readonly"),U=s(),$=n("a",{class:"header-anchor",href:"#driver-uri-readonly","aria-hidden":"true"},"#",-1),F=n("p",null,"\u5F53\u524D Driver \u7ECF\u8FC7\u683C\u5F0F\u5316\u7684\u8FDE\u63A5 uri.",-1),X=n("p",null,[n("strong",null,"\u6CE8\u610F"),s(" \u683C\u5F0F\u5316\u540E\u7684 uri \u66F4\u89C4\u8303, \u4E0D\u4E00\u5B9A\u7B49\u4E8E\u4F20\u5165\u7684 uri.")],-1),z=n("h3",{id:"driver-type",tabindex:"-1"},[n("code",null,"Driver::type"),s(),n("a",{class:"header-anchor",href:"#driver-type","aria-hidden":"true"},"#")],-1),G=n("p",null,[s("\u5F53\u524D Driver \u7684\u9A71\u52A8\u7C7B\u578B, \u53C2\u8003"),n("a",{href:"#%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B"},"\u9A71\u52A8\u7C7B\u578B\u6807\u8BC6")],-1),H={id:"driver-config-readonly",tabindex:"-1"},J=n("code",null,"Driver::config",-1),K=s(),Z=s("readonly"),nn=s(),sn=n("a",{class:"header-anchor",href:"#driver-config-readonly","aria-hidden":"true"},"#",-1),en=n("p",null,[s("\u5F53\u524D Driver \u7684\u914D\u7F6E, \u8BE5\u914D\u7F6E\u662F\u5BF9 "),n("code",null,"new Driver(options)"),s(" \u4E2D "),n("code",null,"options"),s(" \u89E3\u6790\u540E\u7684\u5BF9\u8C61\u7684"),n("strong",null,"\u5FEB\u7167"),s(".")],-1),an=n("p",null,[n("strong",null,"P.S."),s(" \u8FD9\u610F\u5473\u7740\u4F60\u5BF9 config \u4E0A\u5B57\u6BB5\u7684\u66F4\u6539\u662F\u6CA1\u6709\u610F\u4E49\u7684.")],-1),tn={id:"driver-extend-config-readonly",tabindex:"-1"},on=n("code",null,"Driver::extend_config",-1),rn=s(),cn=s("readonly"),pn=s(),dn=n("a",{class:"header-anchor",href:"#driver-extend-config-readonly","aria-hidden":"true"},"#",-1),ln=o(`<p>\u5F53\u524D Driver \u7684\u6269\u5C55\u914D\u7F6E, \u6269\u5C55\u914D\u7F6E<strong>\u5E76\u975E</strong>\u53EF\u4EE5\u81EA\u7531\u5B9A\u4E49.</p><p>\u76EE\u524D, \u5728\u521B\u5EFA\u5B9E\u4F8B <code>new Driver(options)</code> \u65F6, \u4F1A\u8BFB\u53D6 <code>options.query[ext_conf_key]</code> \u6765\u83B7\u53D6\u4E00\u4E9B key-value \u4F5C\u4E3A\u6269\u5C55\u914D\u7F6E.</p><ul><li><code>pool</code>: \u662F\u5426\u4F7F\u7528\u8FDE\u63A5\u6C60, \u9ED8\u8BA4\u4E3A <code>false</code></li><li><code>debug</code>: \u662F\u5426\u4F7F\u7528 debug \u6A21\u5F0F. \u6839\u636E query value \u8FDB\u884C coerce, <code>&#39;0&#39; | &#39;false&#39; | &#39;no&#39; | &#39;n&#39; | &#39;&#39; </code>\u8868\u793A <code>false</code>, <code>&#39;1&#39; | &#39;true&#39; | &#39;y&#39;</code> \u6216\u5176\u5B83\u975E\u7A7A\u503C\u8868\u793A <code>true</code>.</li></ul><p>\u4E3E\u4F8B\u8BF4\u660E:</p><div class="language-js"><pre><code><span class="token comment">// those db.extend_config.pool // =&gt; true</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?pool=1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?pool=aaa&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?pool=true&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// those db.extend_config.debug // =&gt; true</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?debug=1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?debug=true&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// those db.extend_config.debug // =&gt; false</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?debug=0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?debug=no&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> db <span class="token operator">=</span> Driver<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;mysql://root:@localhost:3306/mydb?debug=false&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,5),un={id:"driver-connection-readonly",tabindex:"-1"},vn=n("code",null,"Driver::connection",-1),_n=s(),hn=s("readonly"),kn=s(),gn=n("a",{class:"header-anchor",href:"#driver-connection-readonly","aria-hidden":"true"},"#",-1),yn=o("<p>\u5F53\u524D driver \u7684\u5B9E\u9645\u8FDE\u63A5\u5BF9\u8C61, \u53EF\u80FD\u662F\u4EE5\u4E0B\u7C7B\u578B:</p><table><thead><tr><th>\u9A71\u52A8\u7C7B\u578B</th><th>connection \u7C7B\u578B</th><th>\u662F\u5426\u4E3A fibjs \u539F\u751F\u5BF9\u8C61</th></tr></thead><tbody><tr><td><code>mysql</code></td><td><code>Class_MySQL</code></td><td>Y</td></tr><tr><td><code>sqlite</code></td><td><code>Class_SQLite</code></td><td>Y</td></tr><tr><td><code>postgresql</code></td><td><code>Class_DbConnection</code></td><td>Y</td></tr><tr><td><code>mongodb</code></td><td><code>Class_MongoDB</code></td><td>Y</td></tr><tr><td><code>redis</code></td><td><code>Class_Redis</code></td><td>Y</td></tr></tbody></table>",2),bn={id:"driver-ispool-readonly",tabindex:"-1"},fn=n("code",null,"Driver::isPool",-1),mn=s(),Dn=s("readonly"),qn=s(),xn=n("a",{class:"header-anchor",href:"#driver-ispool-readonly","aria-hidden":"true"},"#",-1),Tn=n("p",null,[s("\u5F53\u524D driver \u662F\u5426\u4F7F\u7528\u8FDE\u63A5\u6C60. \u5176\u503C\u53D6\u51B3\u4E8E "),n("code",null,"Driver.extend_config.pool"),s(" \u7684\u503C.")],-1),wn={id:"driver-issql-readonly",tabindex:"-1"},Sn=n("code",null,"Driver::isSql",-1),jn=s(),Cn=s("readonly"),Pn=s(),An=n("a",{class:"header-anchor",href:"#driver-issql-readonly","aria-hidden":"true"},"#",-1),En=n("p",null,[s("\u5F53\u524D driver \u662F\u5426\u5C5E\u4E8E SQL \u6570\u636E\u5E93\u7684\u5BA2\u6237\u7AEF, \u5982 "),n("code",null,"sqlite"),s(", "),n("code",null,"mysql"),s(", "),n("code",null,"postgresql"),s(".")],-1),In={id:"driver-isnosql-readonly",tabindex:"-1"},Nn=n("code",null,"Driver::isNoSql",-1),Ln=s(),Qn=s("readonly"),Vn=s(),Bn=n("a",{class:"header-anchor",href:"#driver-isnosql-readonly","aria-hidden":"true"},"#",-1),Rn=n("p",null,[s("\u5F53\u524D driver \u662F\u5426\u5C5E\u4E8E NoSQL \u6570\u636E\u5E93\u7684\u5BA2\u6237\u7AEF, \u5982 "),n("code",null,"mongodb"),s(".")],-1),Mn={id:"driver-iscommand-readonly",tabindex:"-1"},Yn=n("code",null,"Driver::isCommand",-1),On=s(),Wn=s("readonly"),Un=s(),$n=n("a",{class:"header-anchor",href:"#driver-iscommand-readonly","aria-hidden":"true"},"#",-1),Fn=o('<p>\u5F53\u524D driver \u662F\u5426\u5C5E\u4E8E\u901A\u8FC7 command \u65B9\u5F0F\u548C server \u4EA4\u4E92\u7684\u5BA2\u6237\u7AEF, \u5982 <code>mongodb</code>, <code>redis</code>.</p><h3 id="driver-open-void" tabindex="-1"><code>Driver::open(): void</code> <a class="header-anchor" href="#driver-open-void" aria-hidden="true">#</a></h3><p>\u6253\u5F00\u5F53\u524D driver \u7684\u8FDE\u63A5, \u6253\u5F00\u540E, \u53EF\u4EE5\u548C\u6570\u636E\u5E93\u8FDB\u884C\u4EA4\u4E92. \u8BE5\u65B9\u6CD5\u5185\u90E8\u4F9D\u8D56 <code>Driver::getConnection</code> \u6765\u83B7\u53D6\u8FDE\u63A5\u5BF9\u8C61.</p><h3 id="driver-close-void" tabindex="-1"><code>Driver::close(): void</code> <a class="header-anchor" href="#driver-close-void" aria-hidden="true">#</a></h3><p>\u5173\u95ED\u5F53\u524D driver \u7684\u8FDE\u63A5, \u5173\u95ED\u540E, \u4E0D\u53EF\u4EE5\u548C\u6570\u636E\u5E93\u8FDB\u884C\u4EA4\u4E92.</p><h3 id="driver-reopen-void" tabindex="-1"><code>Driver::reopen(): void</code> <a class="header-anchor" href="#driver-reopen-void" aria-hidden="true">#</a></h3><p><strong>\u5B89\u5168\u5730</strong>\u5173\u95ED\u5F53\u524D driver \u7684\u8FDE\u63A5, \u540E\u5E76\u91CD\u65B0\u6253\u5F00\u8FDE\u63A5.</p><p>\u8BE5\u65B9\u6CD5\u53EF\u4EE5\u5728 driver \u672A\u5F00\u542F\u65F6\u8C03\u7528</p><h3 id="driver-getconnection-t" tabindex="-1"><code>Driver::getConnection(): T</code> <a class="header-anchor" href="#driver-getconnection-t" aria-hidden="true">#</a></h3><p>\u83B7\u53D6\u4E00\u4E2A driver \u9A71\u52A8\u7C7B\u578B\u7684\u8FDE\u63A5\u5BF9\u8C61,</p><p><strong>\u6CE8\u610F</strong> \u8BE5\u65B9\u6CD5\u7684\u542B\u4E49\u5E76\u4E0D\u662F\u300C\u653E\u56DE driver \u7684 connection \u5BF9\u8C61\u300D, \u76F8\u5BF9\u5730, \u8BE5\u65B9\u6CD5\u88AB\u8C03\u7528\u5F80\u5F80\u662F\u4E3A\u4E86\u7ED9 connection \u5BF9\u8C61\u8D4B\u503C.</p><h3 id="driver-connectionpool-callback-connection-conn-type-any-any" tabindex="-1"><code>Driver::connectionPool(callback: (connection: CONN_TYPE) =&gt; any): any</code> <a class="header-anchor" href="#driver-connectionpool-callback-connection-conn-type-any-any" aria-hidden="true">#</a></h3><p>\u5F53 <code>this.isPool</code> \u4E3A\u771F, \u4F1A\u4ECE\u8FDE\u63A5\u6C60\u4E2D\u83B7\u53D6\u4E00\u4E2A <code>connection</code> \u5BF9\u8C61, \u4F5C\u4E3A\u4F20\u8F93\u4F20\u5165 <code>callback</code> \u56DE\u8C03\u6267\u884C;</p><p>\u5426\u5219, \u5219\u4F1A\u8C03\u7528 <code>this.getConnection()</code> \u83B7\u53D6\u4E00\u4E2A <code>connection</code> \u5BF9\u8C61, \u4F5C\u4E3A\u4F20\u8F93\u4F20\u5165 <code>callback</code> \u56DE\u8C03\u6267\u884C.</p><h3 id="driver-usetrans-callback-conn-for-trans-conn-type-any" tabindex="-1"><code>Driver::useTrans(callback: (conn_for_trans: CONN_TYPE) =&gt; any)</code> <a class="header-anchor" href="#driver-usetrans-callback-conn-for-trans-conn-type-any" aria-hidden="true">#</a></h3><p>\u83B7\u53D6\u4E00\u4E2A\u8FDE\u63A5 <code>conn_for_trans</code>, \u4EE5\u4E8B\u52A1\u7684\u65B9\u5F0F\u6267\u884C\u4E00\u4E2A <code>callback</code>.</p><h2 id="sqldriver-extends-driver" tabindex="-1"><code>SQLDriver extends Driver</code> <a class="header-anchor" href="#sqldriver-extends-driver" aria-hidden="true">#</a></h2><p>WIP</p><h2 id="mysqldriver-extends-sqldriver" tabindex="-1"><code>MySQLDriver extends SQLDriver</code> <a class="header-anchor" href="#mysqldriver-extends-sqldriver" aria-hidden="true">#</a></h2><p>WIP</p><h2 id="postgresqldriver-extends-sqldriver" tabindex="-1"><code>PostgreSQLDriver extends SQLDriver</code> <a class="header-anchor" href="#postgresqldriver-extends-sqldriver" aria-hidden="true">#</a></h2><p>WIP</p><h2 id="sqlitedriver-extends-sqldriver" tabindex="-1"><code>SQLiteDriver extends SQLDriver</code> <a class="header-anchor" href="#sqlitedriver-extends-sqldriver" aria-hidden="true">#</a></h2><p>WIP</p><h2 id="redisdriver-extends-driver" tabindex="-1"><code>RedisDriver extends Driver</code> <a class="header-anchor" href="#redisdriver-extends-driver" aria-hidden="true">#</a></h2><p>WIP</p><h2 id="mongodriver-extends-driver" tabindex="-1"><code>MongoDriver extends Driver</code> <a class="header-anchor" href="#mongodriver-extends-driver" aria-hidden="true">#</a></h2><p>WIP</p>',28);function Xn(zn,Gn,Hn,Jn,Kn,Zn){const e=p("Badge");return i(),c("div",null,[l,n("h3",u,[v,_,a(e,{type:"info"},{default:t(()=>[h]),_:1}),k,g]),y,n("h3",b,[f,m,a(e,{type:"info"},{default:t(()=>[D]),_:1}),q,x]),T,n("h3",w,[S,j,a(e,{type:"info"},{default:t(()=>[C]),_:1}),P,A]),E,n("h3",I,[N,L,a(e,{type:"warning"},{default:t(()=>[Q]),_:1}),V,B]),R,n("h3",M,[Y,O,a(e,{type:"warning"},{default:t(()=>[W]),_:1}),U,$]),F,X,z,G,n("h3",H,[J,K,a(e,{type:"warning"},{default:t(()=>[Z]),_:1}),nn,sn]),en,an,n("h3",tn,[on,rn,a(e,{type:"warning"},{default:t(()=>[cn]),_:1}),pn,dn]),ln,n("h3",un,[vn,_n,a(e,{type:"warning"},{default:t(()=>[hn]),_:1}),kn,gn]),yn,n("h3",bn,[fn,mn,a(e,{type:"warning"},{default:t(()=>[Dn]),_:1}),qn,xn]),Tn,n("h3",wn,[Sn,jn,a(e,{type:"warning"},{default:t(()=>[Cn]),_:1}),Pn,An]),En,n("h3",In,[Nn,Ln,a(e,{type:"warning"},{default:t(()=>[Qn]),_:1}),Vn,Bn]),Rn,n("h3",Mn,[Yn,On,a(e,{type:"warning"},{default:t(()=>[Wn]),_:1}),Un,$n]),Fn])}var es=r(d,[["render",Xn]]);export{ss as __pageData,es as default};
